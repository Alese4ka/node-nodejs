(()=>{"use strict";var e={229:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(611)),i=r(n(16)),s=r(n(24)),a=r(n(907)),f=r(n(161)),l=n(293),d=n(293),u=r(n(928)),c=n(211),p=process.env.PORT,y=u.default.join("./src/data.json"),v=(0,l.v4)(),g=s.default.readFileSync("./src/data.json","utf-8");let m=JSON.parse(g);if(a.default.isPrimary){const e=f.default.cpus().length;console.log(`Master process is running on PID: ${process.pid}`);for(let t=0;t<e;t++)a.default.fork();a.default.on("exit",((e,t,n)=>{console.log(`Worker ${e.process.pid} died. Restarting...`),a.default.fork()}))}else o.default.createServer(((e,t)=>{try{if(e.url){const n=i.default.parse(e.url,!0),r=n.pathname.split("/").pop();if("/api/users"==n.pathname&&"GET"==e.method&&(t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(m,null,2))),n.pathname?.includes("/api/users/")&&"GET"==e.method&&r&&(r&&(0,d.validate)(r)?m.find((e=>e.id===r))?(t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(m.find((e=>e.id===r)),null,2))):(t.writeHead(404,{"Content-Type":"application/json"}),t.end("User's doesn't exist")):(t.writeHead(400,{"Content-Type":"application/json"}),t.end("User's id is invalid"))),"/api/users"==n.pathname&&"POST"==e.method){let n="";e.on("data",(e=>{n+=e.toString()})),e.on("end",(()=>{const e=JSON.parse(n);if(e.username&&e.age&&e.hobbies){const n={id:v,...e};m.push(n),s.default.createWriteStream(y).write(JSON.stringify(m,null,2)),t.writeHead(201,{"Content-Type":"application/json"}),t.end("User was created")}else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Request body does not contain required fields")}))}if(n.pathname?.includes("/api/users/")&&r&&"PUT"==e.method){let n="";e.on("data",(e=>{n+=e.toString()})),e.on("end",(()=>{const e=JSON.parse(n),o=(0,c.getUser)(r,m);if("string"==typeof o)t.writeHead(400,{"Content-Type":"application/json"}),t.end(o);else if(o){const n={...o,...e};m=m.filter((e=>e.id!==r)),m.push(n),s.default.createWriteStream(y).write(JSON.stringify(m,null,2)),t.writeHead(200,{"Content-Type":"application/json"}),t.end("User was updated")}else t.writeHead(404,{"Content-Type":"application/json"}),t.end("User's doesn't exist")}))}if(n.pathname?.includes("/api/users/")&&r&&"DELETE"==e.method){const e=(0,c.getUser)(r,m);"string"==typeof e?(t.writeHead(400,{"Content-Type":"application/json"}),t.end(e)):e?(m=m.filter((e=>e.id!==r)),s.default.createWriteStream(y).write(JSON.stringify(m,null,2)),t.writeHead(204,{"Content-Type":"application/json"}),t.end("User was deleted")):(t.writeHead(404,{"Content-Type":"application/json"}),t.end("User's doesn't exist"))}n.pathname?.includes("/api/users/")||(t.writeHead(404,{"Content-Type":"application/json"}),t.end("Information doesn't found. Please check your request"))}}catch{t.writeHead(500,{"Content-Type":"application/json"}),t.end("Sorry. Server is unreachable. Try later.")}})).listen(p),console.log(`Worker process is running on PID: ${process.pid}`)},211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUser=void 0;const r=n(293);t.getUser=(e,t)=>e&&(0,r.validate)(e)?!!t.find((t=>t.id===e))&&t.find((t=>t.id===e)):"User's id is invalid"},293:(e,t,n)=>{n.r(t),n.d(t,{MAX:()=>r,NIL:()=>o,parse:()=>a,stringify:()=>d,v1:()=>U,v1ToV6:()=>T,v3:()=>b,v4:()=>I,v5:()=>C,v6:()=>O,v6ToV1:()=>H,v7:()=>A,validate:()=>s,version:()=>D});const r="ffffffff-ffff-ffff-ffff-ffffffffffff",o="00000000-0000-0000-0000-000000000000",i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,s=function(e){return"string"==typeof e&&i.test(e)},a=function(e){if(!s(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n},f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).slice(1));function l(e,t=0){return(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase()}const d=function(e,t=0){const n=l(e,t);if(!s(n))throw TypeError("Stringified UUID is invalid");return n},u=require("node:crypto");var c=n.n(u);const p=new Uint8Array(256);let y,v,g=p.length;function m(){return g>p.length-16&&(c().randomFillSync(p),g=0),p.slice(g,g+=16)}let h=0,w=0;const U=function(e,t,n){let r=t&&n||0;const o=t||new Array(16);let i=(e=e||{}).node,s=e.clockseq;if(e._v6||(i||(i=y),null==s&&(s=v)),null==i||null==s){const t=e.random||(e.rng||m)();null==i&&(i=[t[0],t[1],t[2],t[3],t[4],t[5]],y||e._v6||(i[0]|=1,y=i)),null==s&&(s=16383&(t[6]<<8|t[7]),void 0!==v||e._v6||(v=s))}let a=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:w+1;const d=a-h+(f-w)/1e4;if(d<0&&void 0===e.clockseq&&(s=s+1&16383),(d<0||a>h)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=a,w=f,v=s,a+=122192928e5;const u=(1e4*(268435455&a)+f)%4294967296;o[r++]=u>>>24&255,o[r++]=u>>>16&255,o[r++]=u>>>8&255,o[r++]=255&u;const c=a/4294967296*1e4&268435455;o[r++]=c>>>8&255,o[r++]=255&c,o[r++]=c>>>24&15|16,o[r++]=c>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(let e=0;e<6;++e)o[r+e]=i[e];return t||l(o)};function T(e){const t=(n="string"==typeof e?a(e):e,Uint8Array.of((15&n[6])<<4|n[7]>>4&15,(15&n[7])<<4|(240&n[4])>>4,(15&n[4])<<4|(240&n[5])>>4,(15&n[5])<<4|(240&n[0])>>4,(15&n[0])<<4|(240&n[1])>>4,(15&n[1])<<4|(240&n[2])>>4,96|15&n[2],n[3],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]));var n;return"string"==typeof e?l(t):t}function S(e,t,n){function r(e,r,o,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=a(r)),16!==(null===(s=r)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+e.length);if(f.set(r),f.set(e,r.length),f=n(f),f[6]=15&f[6]|t,f[8]=63&f[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=f[e];return o}return l(f)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}const b=S("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),c().createHash("md5").update(e).digest()})),j={randomUUID:c().randomUUID},I=function(e,t,n){if(j.randomUUID&&!t&&!e)return j.randomUUID();const r=(e=e||{}).random||(e.rng||m)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return l(r)},C=S("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),c().createHash("sha1").update(e).digest()}));function O(e={},t,n=0){let r=U({...e,_v6:!0},new Uint8Array(16));if(r=T(r),t){for(let e=0;e<16;e++)t[n+e]=r[e];return t}return l(r)}function H(e){const t=(n="string"==typeof e?a(e):e,Uint8Array.of((15&n[3])<<4|n[4]>>4&15,(15&n[4])<<4|(240&n[5])>>4,(15&n[5])<<4|15&n[6],n[7],(15&n[1])<<4|(240&n[2])>>4,(15&n[2])<<4|(240&n[3])>>4,16|(240&n[0])>>4,(15&n[0])<<4|(240&n[1])>>4,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]));var n;return"string"==typeof e?l(t):t}let _=null,x=null,q=0;const A=function(e,t,n){e=e||{};let r=t&&n||0;const o=t||new Uint8Array(16),i=e.random||(e.rng||m)(),s=void 0!==e.msecs?e.msecs:Date.now();let a=void 0!==e.seq?e.seq:null,f=x,d=_;return s>q&&void 0===e.msecs&&(q=s,null!==a&&(f=null,d=null)),null!==a&&(a>2147483647&&(a=2147483647),f=a>>>19&4095,d=524287&a),null!==f&&null!==d||(f=127&i[6],f=f<<8|i[7],d=63&i[8],d=d<<8|i[9],d=d<<5|i[10]>>>3),s+1e4>q&&null===a?++d>524287&&(d=0,++f>4095&&(f=0,q++)):q=s,x=f,_=d,o[r++]=q/1099511627776&255,o[r++]=q/4294967296&255,o[r++]=q/16777216&255,o[r++]=q/65536&255,o[r++]=q/256&255,o[r++]=255&q,o[r++]=f>>>4&15|112,o[r++]=255&f,o[r++]=d>>>13&63|128,o[r++]=d>>>5&255,o[r++]=d<<3&255|7&i[10],o[r++]=i[11],o[r++]=i[12],o[r++]=i[13],o[r++]=i[14],o[r++]=i[15],t||l(o)},D=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},907:e=>{e.exports=require("cluster")},611:e=>{e.exports=require("http")},24:e=>{e.exports=require("node:fs")},161:e=>{e.exports=require("node:os")},928:e=>{e.exports=require("path")},16:e=>{e.exports=require("url")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(229)})();